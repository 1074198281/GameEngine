# 3D图形学原理

[TOC]



## 一 光照

包括了**传统光照模型**，**全局光照**，**pbr渲染**。

### 1. 传统光照模型Blinn-Phong

将光线分为3类，分别是**镜面反射光**，**漫反射光**，**环境光**。

Blinn-Phong模型是一个经验模型。由泛光模型，兰伯特模型，Phong模型混合得到。

#### 1.1 泛光模型

泛光模型只考虑了环境光，经验公式大致为。
$$
\pmb{I}env = \pmb{K}a * Ia
$$
Ka表示物体表面堆环境光的反射率，Ia表示环境入射光的强度。反射率其实就表示了表面反射的颜色。

#### 1.2 兰伯特模型

兰伯特模型表现了漫反射的现象，在兰伯特模型下，各个不同方向上反射的光的强度相等。表现公式为：
$$
\pmb{L}d = \pmb{k}d * (I/r^2) * max(0, \pmb{n} * \pmb{l})
$$
Ld为出射光的颜色，kd为物体表面的漫反射率，(I/r^2)表示了光强随着距离的衰减因素，n*l表示了法向量与入射光向量的乘积，为了剔除背面来的光源，要与0取最大值。

#### 1.3 Phong模型

Phong模型表现了物体表面的镜面反射现象。经验公式为：
$$
\pmb{L}s = \pmb{k}s * (I/r^2) * max(0, cos(\pmb{R} * \pmb{v}))^p
$$
其中Ls表示镜面反射光，ks为镜面反射系数，p次幂是为了加速远离反射中心处的高光衰减。R是出射光线方向关于法向量的对称位置，v是观察视线方向。

#### 1.4 Blinn-Phong模型

Blinn-Phong模型中，使用了半程向量来替代视线v和R的乘积，用来加速运算。

## 二 着色

### 三 纹理映射